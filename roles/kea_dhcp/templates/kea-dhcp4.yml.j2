  Dhcp4:
    interfaces-config:
      interfaces: 
{% for iface in ansible_interfaces %}
      - {{ iface }}
{% endfor %}

    control-socket:
      socket-type: unix
      socket-name: /run/kea/kea4-ctrl-socket

    lease-database:
      type: postgresql
      name: "{{ kea_dhcp.db.name }}"
      host: "{{ globvar.db.host }}"
      port: {{ globvar.db.port }}
      user: "{{ kea_dhcp.db.username }}"
      password: "{{ kea_dhcp.db.password }}"

    hosts-database:
      type: postgresql
      name: "{{ kea_dhcp.db.name }}"
      host: "{{ globvar.db.host }}"
      port: {{ globvar.db.port }}
      user: "{{ kea_dhcp.db.username }}"
      password: "{{ kea_dhcp.db.password }}"

    expired-leases-processing:
      reclaim-timer-wait-time: 10
      flush-reclaimed-timer-wait-time: 25
      hold-reclaimed-time: 3600
      max-reclaim-leases: 100
      max-reclaim-time: 250
      unwarned-reclaim-cycles: 5

    renew-timer: 900
    rebind-timer: 1800
    valid-lifetime: 3600

    option-data:
      - name: domain-name-servers
        data: "{{ kea_dhcp.dhcpconf.dns_servers | join(', ') }}"
      - name: domain-search
        data: "{{ kea_dhcp.dhcpconf.search_domain }}"

    config-control:
      config-databases:
        - type: postgresql
          name: "{{ kea_dhcp.db.name }}"
          host: "{{ globvar.db.host }}"
          port: {{ globvar.db.port }}
          user: "{{ kea_dhcp.db.username }}"
          password: "{{ kea_dhcp.db.password }}"

    loggers:
      - name: kea-dhcp4
        output_options:
        - output: stdout
          pattern: "%-5p %m\n"
        severity: INFO
        debuglevel: 0
